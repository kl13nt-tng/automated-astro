---
const referer = Astro.request.headers.get("Referer");
const url = new URL(referer!);
const userId = url.searchParams.get("userId");

if (!userId) return;

const response = await Promise.all([
	fetch(
		`https://jsonplaceholder.typicode.com/users/${userId}/posts?userId=${userId}`
	).then((res) => res.json()),
	fetch(
		`https://jsonplaceholder.typicode.com/users/${userId}?userId=${userId}`
	).then((res) => res.json()),
]);

console.log(response);
---

<h1>Posts by user {userId}</h1>

<!-- <ul>
	{
		data.map((post) => (
			<li>
				<h2>{post.title}</h2>
				<p>{post.body}</p>
			</li>
		))
	}
</ul> -->
